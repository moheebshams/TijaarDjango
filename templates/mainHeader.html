{% load static %}
<style>
  /* Mobile menu animation styles */
  #mobileMenu {
    transform: translateX(100%);
    transition: transform 0.3s ease-in-out;
    display: block !important;
    height: 100vh !important;
  }
  
  #mobileMenu.slide-in {
    transform: translateX(0);
  }
  
  #mobileMenu.slide-out {
    transform: translateX(-100%);
  }
  
  /* Initially hide the mobile menu */
  #mobileMenu:not(.slide-in) {
    visibility: hidden;
  }
</style>

<header class="sticky top-0 z-50 flex items-center max-w-[1400px] mx-auto h-[70px] px-4 md:px-7 bg-white relative border-b border-gray-200">
  <!-- Logo on left -->
  <a href="{% url 'home' %}" class="flex-shrink-0 md:mr-4">
    <div class="flex items-center gap-2">
      <img src="{% static 'images/urdu.png' %}" alt="Tijaar Logo" class="w-[70px]" />
    </div>
  </a>

  <!-- Hamburger Button on right (visible only on mobile) -->
  <button id="mobileMenuButton" class="p-2 text-primary md:hidden ml-auto">
    <i class="fas fa-bars text-xl"></i>
  </button>

  <!-- Desktop content (hidden on mobile) -->
  <div class="hidden md:flex items-center justify-between flex-1">
    <!-- Search (Desktop only) -->
    <div class="flex-1 max-w-xl mx-auto">
      <div class="flex items-center border border-gray-300 rounded-lg px-3 py-2 w-full bg-white">
        <input
          type="text"
          placeholder="Search household essentials, groceries and more..."
          class="flex-grow outline-none bg-white text-sm placeholder-gray-500"
        />
        <i class="fas fa-search text-primary"></i>
      </div>
    </div>

    <!-- User Actions (hidden on mobile, visible on desktop) -->
    <div class="flex items-center gap-4 text-gray-800 text-sm flex-shrink-0 ml-4">
      <div class="flex items-center gap-2 cursor-pointer group">
        <a href="{% url 'form' %}" class="relative group flex items-center gap-2 group">
          <i class="fas fa-user text-primary group-hover:scale-110 transition-transform duration-200"></i>
          <p class="hidden sm:inline">Sign In</p>
        </a>
      </div>
      <div class="flex items-center gap-2 cursor-pointer relative group">
        <a href="{% url 'addToCart' %}" class="relative group flex items-center gap-2 group">
          <i class="fas fa-shopping-cart text-primary group-hover:scale-110 transition-transform duration-200"></i>
          <p class="hidden sm:inline">Cart</p>
        </a>
      </div>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div
    id="mobileMenu"
    class="md:hidden w-full bg-white absolute top-full left-0 border-t border-b border-gray-300 shadow-md z-50 slide-out"
  >
    <div class="p-5">
      <!-- Search Box -->
      <div class="mb-5 flex items-center bg-white border border-gray-300 rounded-lg px-4 py-2 shadow-sm">
        <input
        type="text"
        placeholder="Search..."
        class="flex-grow bg-transparent text-sm text-gray-800 placeholder-gray-500 focus:outline-none"
        />
        <i class="fas fa-search text-primary w-5"></i>
      </div>

      <!-- Menu Items -->
      <div class="space-y-2">
        <a
          href="{% url 'home' %}"
          class="flex items-center gap-3 px-4 py-2 text-sm font-medium text-gray-800 hover:bg-blue-100 hover:text-blue-700 rounded-lg transition duration-200"
        >
          <i class="fas fa-home text-primary w-5"></i>
          <span>Home</span>
        </a>
        <a
          href="{% url 'form' %}"
          class="flex items-center gap-3 px-4 py-2 text-sm font-medium text-gray-800 hover:bg-blue-100 hover:text-blue-700 rounded-lg transition duration-200"
        >
          <i class="fas fa-user text-primary w-5"></i>
          <span>Sign In</span>
        </a>
        <a
          href="{% url 'addToCart' %}"
          class="flex items-center gap-3 px-4 py-2 text-sm font-medium text-gray-800 hover:bg-blue-100 hover:text-blue-700 rounded-lg transition duration-200"
        >
          <i class="fas fa-shopping-cart text-primary w-5"></i>
          <span>Cart</span>
        </a>
        <a
          href="{% url 'trackYourOrder' %}"
          class="flex items-center gap-3 px-4 py-2 text-sm font-medium text-gray-800 hover:bg-blue-100 hover:text-blue-700 rounded-lg transition duration-200"
        >
          <i class="fas fa-truck text-primary w-5"></i>
          <span>Track Order</span>
        </a>
        <a
          href="#"
          class="flex items-center gap-3 px-4 py-2 text-sm font-medium text-gray-800 hover:bg-blue-100 hover:text-blue-700 rounded-lg transition duration-200"
        >
          <i class="fas fa-tag text-primary w-5"></i>
          <span>Offers</span>
        </a>
      </div>
    </div>
  </div>
</header>

<script>
// Mobile menu toggle with slide-in animation
document.getElementById("mobileMenuButton").onclick = function(e) {
  e.stopPropagation(); // Prevent this click from triggering the document click listener
  
  const mobileMenu = document.getElementById("mobileMenu");
  
  // Toggle the menu with animation
  if (mobileMenu.classList.contains("slide-out")) {
    mobileMenu.classList.remove("slide-out");
    mobileMenu.classList.add("slide-in");
  } else {
    mobileMenu.classList.remove("slide-in");
    mobileMenu.classList.add("slide-out");
  }
};

// Close mobile menu when clicking outside
document.addEventListener("click", function(event) {
  const mobileMenu = document.getElementById("mobileMenu");
  const menuButton = document.getElementById("mobileMenuButton");
  
  if (!mobileMenu.contains(event.target) && 
      event.target !== menuButton && 
      !menuButton.contains(event.target) &&
      mobileMenu.classList.contains("slide-in")) {
    
    mobileMenu.classList.remove("slide-in");
    mobileMenu.classList.add("slide-out");
  }
});

// Prevent clicks inside the menu from closing it
document.getElementById("mobileMenu").addEventListener("click", function(e) {
  e.stopPropagation();
});
</script>