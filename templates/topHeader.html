{% load static %}
<header class="flex items-center max-w-[1400px] mx-auto h-[42px] bg-primary px-4 md:px-7 relative z-[223]">
  <!-- Left: Social Icons -->
  <div class="flex items-center gap-3 sm:gap-4 flex-1">
    <a href="#" title="Facebook" aria-label="Facebook" class="text-white p-1 hover:scale-110 transition-transform duration-200">
      <i class="fab fa-facebook-f text-xs sm:text-sm"></i>
    </a>
    <a href="#" title="Instagram" aria-label="Instagram" class="text-white p-1 hover:scale-110 transition-transform duration-200">
      <i class="fab fa-instagram text-xs sm:text-sm"></i>
    </a>
    <a href="#" title="Twitter" aria-label="Twitter" class="text-white p-1 hover:scale-110 transition-transform duration-200">
      <i class="fab fa-twitter text-xs sm:text-sm"></i>
    </a>
  </div>

  <!-- Right: Utility Icons -->
  <div class="flex items-center gap-2 sm:gap-3 md:gap-4 flex-1 justify-end">
    <!-- Location button -->
    <button onclick="openLocationModal()" title="Select Your Location" aria-label="Add Location" class="flex items-center gap-1 sm:gap-1.5 pr-2 sm:pr-3 border-r border-white/30 group">
      <i class="fas fa-map-marker-alt text-white text-xs sm:text-sm group-hover:scale-110 transition-transform duration-200"></i>
      <span class="text-white font-semibold text-xs hidden sm:inline">Location</span>
    </button>

    <!-- Track order -->
    <a href="{% url 'trackYourOrder' %}" title="Track Your Order" aria-label="Track Your Order" class="flex items-center gap-1 sm:gap-1.5 pr-2 sm:pr-3 border-r border-white/30 group">
      <i class="fa-solid fa-truck-fast text-white text-xs sm:text-sm group-hover:scale-110 transition-transform duration-200"></i>  
      <span class="text-white font-semibold text-xs hidden sm:inline">Track Your Order</span>
    </a>

    <!-- Wishlist -->
    <a href="{% url "wishlist" %}" title="Wishlist" aria-label="Wishlist" class="flex items-center gap-1 sm:gap-1.5 pr-2 sm:pr-3 border-r border-white/30 group">
      <i class="fas fa-heart text-white text-xs sm:text-sm group-hover:scale-110 transition-transform duration-200"></i>
      <span class="text-white font-semibold text-xs hidden sm:inline">Wishlist</span>
    </a>

    <!-- Cart - Hidden on md, lg, xl -->
    <a href="{% url 'addToCart' %}" title="Cart" aria-label="Cart" class="flex items-center gap-1 sm:gap-1.5 pr-2 sm:pr-3 border-r border-white/30 group sm:flex md:hidden">
      <i class="fas fa-shopping-cart text-white text-xs sm:text-sm group-hover:scale-110 transition-transform duration-200"></i>
      <span class="text-white font-semibold text-xs hidden sm:inline">Cart</span>
    </a>

    <!-- User - Hidden on md, lg, xl -->
    <a href="{% url 'form' %}" title="Sign In" aria-label="Sign In" class="flex items-center gap-1 sm:gap-1.5 group sm:flex md:hidden">
      <i class="fas fa-user text-white text-xs sm:text-sm group-hover:scale-110 transition-transform duration-200"></i>
      <span class="text-white font-semibold text-xs hidden sm:inline">Sign In</span>
    </a>
  </div>

  <!-- Location Modal -->
  <div id="locationModal" class="fixed inset-0 hidden bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
    <div class="bg-white rounded-lg shadow-xl w-full max-w-md overflow-hidden">
      <div class="flex justify-between items-center p-4 sm:p-5 border-b">
        <h3 class="text-base sm:text-lg font-semibold">Select Delivery Address</h3>
        <button onclick="closeLocationModal()" class="text-gray-400 hover:text-gray-600 transition-colors">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="p-4 sm:p-5">
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-1">Location</label>
          <select id="locationSelect" onchange="updateBlockOptions()" class="w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-primary focus:border-transparent outline-none">
            <option value="">Select Location</option>
            <option value="b17">B17</option>
            <option value="faisal-hills">Faisal Hills</option>
          </select>
        </div>
        
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-1">Block</label>
          <select id="blockSelect" class="w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-primary focus:border-transparent outline-none">
            <option value="">Select Block</option>
          </select>
        </div>
        
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-1">Full Address</label>
          <textarea placeholder="Enter full address" rows="2" class="w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-primary focus:border-transparent outline-none"></textarea>
        </div>
        
        <div>
          <button onclick="saveLocation()" class="w-full px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark transition-colors font-medium focus:outline-none">
            Save Address
          </button>
        </div>
      </div>
    </div>
  </div>
</header>

<script>
  function openLocationModal() {
    const modal = document.getElementById('locationModal');
    modal.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
  }

  function closeLocationModal() {
    const modal = document.getElementById('locationModal');
    modal.classList.add('hidden');
    document.body.style.overflow = 'auto';
  }

  function updateBlockOptions() {
    const locationSelect = document.getElementById('locationSelect');
    const blockSelect = document.getElementById('blockSelect');
    const selectedLocation = locationSelect.value;

    blockSelect.options.length = 1; // Keep first option

    if (selectedLocation === 'b17') {
      for (let i = 0; i < 7; i++) {
        const block = String.fromCharCode(65 + i);
        blockSelect.add(new Option(`${block} Block`, block.toLowerCase()));
      }
    } else if (selectedLocation === 'faisal-hills') {
      ['Executive', 'A', 'B', 'C'].forEach(block => {
        blockSelect.add(new Option(`${block} Block`, block.toLowerCase()));
      });
    }
  }

  function saveLocation() {
    const location = document.getElementById('locationSelect').value;
    const block = document.getElementById('blockSelect').value;
    const address = document.querySelector('textarea').value;
    
    if (location && block && address) {
      // Implement address saving logic here
      console.log('Saving address:', { location, block, address });
      closeLocationModal();
    } else {
      alert('Please fill in all fields');
    }
  }
</script>