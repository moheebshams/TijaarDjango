{% load static %}
<section class="w-full px-4 md:px-7 mt-16 mb-12">
  <div class="max-w-6xl mx-auto bg-primary rounded-2xl overflow-hidden shadow-xl">
    <div class="flex flex-col md:flex-row">
      <!-- Content Section -->
      <div class="p-8 md:p-10 md:w-2/3">
        <div class="mb-2">
          <span class="bg-white text-primary text-sm font-bold px-4 py-1 rounded-full inline-flex items-center">
            <i class="fas fa-bolt mr-2"></i>
            {{ offer.title }}
          </span>
        </div>

        <h2 class="text-3xl md:text-4xl font-bold font-heading mb-4 text-white">
          {{ offer.sale }} <span class="text-yellow-300">{{ offer.discount }}</span>
        </h2>

        <p class="text-lg mb-6 text-white text-opacity-90">
          {{ offer.description }}
        </p>

        <!-- Countdown Timer -->
        <div class="flex flex-wrap gap-3 mb-8" id="countdown"
             data-endtime="{{ offer.end_time|date:'Y-m-d H:i:s' }}">
          <div class="time-box bg-white bg-opacity-15 backdrop-blur-sm rounded-xl p-4 text-center w-24 border border-white border-opacity-20">
            <span class="time-value text-3xl font-bold text-white">0</span><p class="text-sm text-white text-opacity-80 mt-1">Days</p>
          </div>
          <div class="time-box bg-white bg-opacity-15 backdrop-blur-sm rounded-xl p-4 text-center w-24 border border-white border-opacity-20"><span class="time-value text-3xl font-bold text-white">0</span><p class="text-sm text-white text-opacity-80 mt-1">Hours</p></div>
          <div class="time-box bg-white bg-opacity-15 backdrop-blur-sm rounded-xl p-4 text-center w-24 border border-white border-opacity-20"><span class="time-value text-3xl font-bold text-white">0</span><p class="text-sm text-white text-opacity-80 mt-1">Mins</p></div>
          <div class="time-box bg-white bg-opacity-15 backdrop-blur-sm rounded-xl p-4 text-center w-24 border border-white border-opacity-20"><span class="time-value text-3xl font-bold text-white">0</span><p class="text-sm text-white text-opacity-80 mt-1">Secs</p></div>
        </div>


        <!-- Buttons -->
        <div class="flex flex-col sm:flex-row gap-4">
          <button class="bg-white text-primary px-8 py-4 rounded-lg font-semibold flex items-center justify-center group">
            <span>Shop Now</span>
            <i class="fas fa-arrow-right ml-2 transform transition-transform duration-300 group-hover:translate-x-1"></i>
          </button>
          <button class="bg-transparent border-2 border-white border-opacity-50 text-white px-8 py-4 rounded-lg font-semibold hover:border-white">
            View All Offers
          </button>
        </div>
      </div>

      <!-- Image Section -->
      <div class="md:w-1/3 flex items-center justify-center p-6">
        <img src="{{ offer.image.url }}" alt="Special Offer" class="rounded-2xl w-full max-w-xs" />
      </div>
    </div>
  </div>
</section>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const countdownEl = document.getElementById("countdown");
  if (!countdownEl) return;

  const endTime = new Date(countdownEl.dataset.endtime.replace(" ", "T")).getTime();

  function updateCountdown() {
    const now = new Date().getTime();
    const distance = endTime - now;

    if (distance <= 0) {
      countdownEl.innerHTML = "<p class='text-white font-bold'>Offer Expired</p>";
      clearInterval(timer);
      return;
    }

    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

    const boxes = countdownEl.querySelectorAll(".time-box .time-value");
    boxes[0].textContent = days;
    boxes[1].textContent = hours;
    boxes[2].textContent = minutes;
    boxes[3].textContent = seconds;
  }

  const timer = setInterval(updateCountdown, 1000);
  updateCountdown();
});
</script>
