{% load static %}
<section class="relative w-full overflow-hidden">
  <div class="relative bg-white h-[500px]">
    <!-- Slider Track -->
    <div id="sliderTrack" class="flex transition-transform duration-500 ease-out">
      {% for slide in slides %}
      <div class="w-full flex-shrink-0">
        <img
          src="{% static slide.image %}"
          alt="{{ forloop.counter }}"
          class="w-[100%] h-[100vh] object-fit"
        />
      </div>
      {% endfor %}
    </div>

    <!-- Indicators -->
    <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2 z-10">
      {% for slide in slides %}
      <button
        class="dot w-3 h-3 rounded-full {% if forloop.first %}bg-white/80{% else %}bg-white/30{% endif %} hover:bg-white transition-all"
        data-index="{{ forloop.counter0 }}"
      ></button>
      {% endfor %}
    </div>
  </div>
</section>

<script>
  // DOM elements
  const track = document.getElementById('sliderTrack');
  const dots = document.querySelectorAll('.dot');
  
  // Configuration
  const totalSlides = dots.length;
  const slideInterval = 4000;
  let currentIndex = 0;
  let autoSlideTimer;

  // Function to update slide position
  function updateSlide() {
    track.style.transform = `translateX(-${currentIndex * 100}%)`;
    
    // Update active dot
    dots.forEach((dot, i) => {
      dot.classList.toggle('bg-white/80', i === currentIndex);
      dot.classList.toggle('bg-white/30', i !== currentIndex);
    });
  }

  // Function to navigate to a specific slide
  function goToSlide(index) {
    currentIndex = (index + totalSlides) % totalSlides;
    updateSlide();
    resetAutoSlide();
  }

  // Function to navigate to next slide
  function nextSlide() {
    goToSlide(currentIndex + 1);
  }

  // Function to reset auto slide timer
  function resetAutoSlide() {
    clearInterval(autoSlideTimer);
    autoSlideTimer = setInterval(nextSlide, slideInterval);
  }

  // Event listeners for dots
  dots.forEach(dot => {
    dot.addEventListener('click', () => {
      goToSlide(parseInt(dot.dataset.index));
    });
  });

  // Initialize auto slide
  resetAutoSlide();
</script>