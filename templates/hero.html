{% load static %}
<section class="relative max-w-[1400px] mx-auto overflow-hidden ">
  <div class="relative">
    <!-- Slider Track -->
    <div id="sliderTrack" class="flex transition-transform duration-500 ease-out">
      {% for slide in slides %}
      <div class="w-full flex-shrink-0">
        <img
          src="{{ slide.image.url }}"
          alt="{{ slide.title }}"
          class="w-full 
                 h-[200px] sm:h-[250px] md:h-[300px] lg:h-[400px] xl:h-[500px] object-cover"
        />
      </div>
      {% endfor %}
    </div>

    <!-- Indicators -->
    <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2 z-10">
      {% for slide in slides %}
      <button
        class="dot w-3 h-3 rounded-full {% if forloop.first %}bg-white/80{% else %}bg-white/30{% endif %} hover:bg-white transition-all"
        data-index="{{ forloop.counter0 }}"
      ></button>
      {% endfor %}
    </div>
  </div>
</section>

<script>
  const track = document.getElementById('sliderTrack');
  const dots = document.querySelectorAll('.dot');
  const totalSlides = dots.length;
  let currentIndex = 0;
  let autoSlideTimer;

  function updateSlide() {
    track.style.transform = `translateX(-${currentIndex * 100}%)`;
    dots.forEach((dot, i) => {
      dot.classList.toggle('bg-white/80', i === currentIndex);
      dot.classList.toggle('bg-white/30', i !== currentIndex);
    });
  }

  function goToSlide(index) {
    currentIndex = (index + totalSlides) % totalSlides;
    updateSlide();
    resetAutoSlide();
  }

  function nextSlide() {
    goToSlide(currentIndex + 1);
  }

  function resetAutoSlide() {
    clearInterval(autoSlideTimer);
    autoSlideTimer = setInterval(nextSlide, 4000);
  }

  dots.forEach(dot => {
    dot.addEventListener('click', () => goToSlide(parseInt(dot.dataset.index)));
  });

  resetAutoSlide();
</script>
